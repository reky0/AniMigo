<ion-grid class="main ion-activatable" [title]="title">
  <ion-ripple-effect></ion-ripple-effect>
  @if (loading) {
    <ion-row class="img-container">
      <ion-col>
        <div class="image-wrapper">
          <ion-skeleton-text [animated]="true" class="skeleton-image"></ion-skeleton-text>
        </div>
      </ion-col>
    </ion-row>
    <ion-row class="label-container">
      <ion-col>
        <ion-skeleton-text [animated]="true" class="skeleton-label-line1"></ion-skeleton-text>
      </ion-col>
    </ion-row>
    <ion-row class="rating bottom-row">
      <ion-col>
        <ion-skeleton-text [animated]="true" class="skeleton-rating"></ion-skeleton-text>
      </ion-col>
    </ion-row>
  } @else {
    <ion-row class="img-container pos-relative">
      <ion-col>
        <div class="image-wrapper">
          @if (!imageLoaded) {
            <ion-skeleton-text [animated]="true" class="skeleton-image"></ion-skeleton-text>
          }
          <ion-img [src]="image" class="img" [class.loaded]="imageLoaded" (ionImgDidLoad)="onImageLoad()" (ionError)="onImageError()"></ion-img>
        </div>
        @if (isFavourite) {
          <div class="favorite-tag tag-corner tag-corner-tl tag-favorite"> <ion-icon name="heart" class="heart-icon"></ion-icon></div>
        }
        @if (mediaStatus) {
          <div class="status-tag tag-corner tag-corner-bl" [attr.data-status]="mediaStatus">
            <ion-icon [name]="getStatusIcon(mediaStatus)"></ion-icon>
          </div>
        }
      </ion-col>
    </ion-row>
    <ion-row class="label-container">
      <ion-col>
        <ion-text class="label">{{ title }}</ion-text>
      </ion-col>
    </ion-row>
    @if (rating) {
      <ion-row class="rating bottom-row">
        <ion-col>
          <ion-icon [name]="recommendation ? 'thumbs-up-sharp' : 'star'" mode="icon-only" class="rating-icon"></ion-icon>
          <ion-text>{{ rating + (recommendation ? '' : '%')}}</ion-text>
        </ion-col>
      </ion-row>
    } @else if (note) {
      <ion-row class="note">
        <ion-col>
          <ion-note>{{ note }}</ion-note>
        </ion-col>
      </ion-row>
    }
  }
</ion-grid>
